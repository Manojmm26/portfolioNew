import{a as oe}from"./chunk-B7A4IQJT.js";import"./chunk-KVVCMORN.js";import{a as se,b as le,c as me,d as pe,e as de,f as ue,g as xe,h as fe,i as ge,j as _e,k as he,l as ve}from"./chunk-WCOHE2FB.js";import{a as Ee}from"./chunk-AN6U5ING.js";import{a as te,b as ie,c as ne}from"./chunk-L67YLM2V.js";import{a as re,b as ae,c as ce}from"./chunk-JDBARCAL.js";import"./chunk-MYN4ZE5I.js";import{b as j,e as D,h as R,k as W,m as Z,n as ee}from"./chunk-HIL3NCSU.js";import"./chunk-HU7WFQWJ.js";import{a as U,c as G,g as K}from"./chunk-SH4BCXAY.js";import{f as $,g as N,ka as J,la as X,ma as Y}from"./chunk-OR5QTTGG.js";import{$a as r,$b as q,Fb as o,Fc as B,Gb as i,Gc as O,Hb as k,Ib as b,Jc as L,Kc as Q,Lb as f,Nb as l,Xb as s,Yb as h,Za as w,Zb as g,_b as I,ac as A,bc as V,e as we,eb as E,gc as P,hc as F,lb as H,ma as u,na as x,pb as d,wb as m,zb as S}from"./chunk-FJLZPIOP.js";var xt=we(Ee());function ke(n,t){if(n&1&&(o(0,"div",41)(1,"strong"),s(2,"Result:"),i(),k(3,"div",9),i()),n&2){let e=l().$implicit,c=l(3);r(3),m("innerHTML",c.sanitizeHtml(e.result),w)}}function Se(n,t){if(n&1){let e=b();o(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),s(4,"code"),i(),s(5),i(),o(6,"mat-panel-description",36),s(7," Try it yourself! "),i()(),o(8,"div",37)(9,"div",15)(10,"span"),s(11,"Code:"),i(),o(12,"button",38),f("click",function(){let a=u(e).index,p=l(3);return x(p.tryExample(a))}),o(13,"mat-icon"),s(14,"play_arrow"),i()()(),o(15,"pre",39),k(16,"code",9),i(),d(17,ke,4,1,"div",40),i()()}if(n&2){let e=t.$implicit,c=t.index,a=l(3);r(5),g(" Interactive Example ",c+1," "),r(11),m("innerHTML",a.highlightCode(e.code),w),r(),m("ngIf",e.result)}}function ze(n,t){if(n&1&&(o(0,"mat-accordion",34),d(1,Se,18,3,"mat-expansion-panel",35),i()),n&2){let e=l(2);r(),m("ngForOf",e.content.interactiveExamples)}}function Me(n,t){if(n&1&&(o(0,"li")(1,"mat-icon"),s(2,"check_circle"),i(),o(3,"span",43),s(4),i()()),n&2){let e=t.$implicit;r(4),h(e)}}function Te(n,t){if(n&1&&(o(0,"div",42)(1,"h3")(2,"mat-icon"),s(3,"lightbulb"),i(),s(4," Key Points "),i(),o(5,"ul"),d(6,Me,5,1,"li",35),i()()),n&2){let e=l(2);r(6),m("ngForOf",e.content.keyPoints)}}function He(n,t){if(n&1&&(o(0,"div",44),s(1),i()),n&2){let e=t.$implicit;r(),h(e)}}function Ie(n,t){if(n&1&&(o(0,"div",47)(1,"mat-icon",48),s(2,"error"),i(),o(3,"span"),s(4),i()()),n&2){let e=t.$implicit;r(4),I("Line ",e.line,": ",e.message,"")}}function qe(n,t){if(n&1&&(o(0,"div",45),d(1,Ie,5,2,"div",46),i()),n&2){let e=l(2);r(),m("ngForOf",e.syntaxErrors)}}function Ae(n,t){if(n&1){let e=b();o(0,"div",49)(1,"h3"),s(2,"Quiz Results"),i(),o(3,"p"),s(4),i(),o(5,"button",50),f("click",function(){u(e);let a=l(2);return x(a.resetQuiz())}),s(6,"Retake Quiz"),i()()}if(n&2){let e=l(2);r(4),g("Score: ",e.quizScore,"%")}}function Ve(n,t){if(n&1){let e=b();o(0,"button",55),f("click",function(){let a=u(e).index,p=l().index,y=l(2);return x(y.checkAnswer(p,a))}),s(1),i()}if(n&2){let e=t.$implicit,c=t.index,a=l().index,p=l(2);m("disabled",p.quizComplete)("color",p.getAnswerColor(a,c)),r(),g(" ",e," ")}}function Pe(n,t){if(n&1&&(o(0,"p",58),s(1),i()),n&2){let e=l(2).index,c=l(2);r(),g(" The correct answer is: ",c.content.quiz[e].options[c.content.quiz[e].correctAnswer]," ")}}function Fe(n,t){if(n&1&&(o(0,"div",56)(1,"p"),s(2),i(),d(3,Pe,2,1,"p",57),i()),n&2){let e=l().index,c=l(2);r(),S(c.isAnswerCorrect(e)?"correct":"incorrect"),r(),g(" ",c.isAnswerCorrect(e)?"\u2713 Correct!":"\u2717 Incorrect"," "),r(),m("ngIf",!c.isAnswerCorrect(e))}}function Be(n,t){if(n&1&&(o(0,"mat-card",51)(1,"mat-card-content")(2,"h3"),s(3),i(),o(4,"p"),s(5),i(),o(6,"div",52),d(7,Ve,2,3,"button",53),i(),d(8,Fe,4,4,"div",54),i()()),n&2){let e=t.$implicit,c=t.index,a=l(2);r(3),g("Question ",c+1,""),r(2),h(e.question),r(2),m("ngForOf",e.options),r(),m("ngIf",a.userAnswers[c]!==void 0)}}function Oe(n,t){if(n&1){let e=b();o(0,"div",59)(1,"button",60),f("click",function(){u(e);let a=l(2);return x(a.completeQuiz())}),s(2," Submit Quiz "),i()()}}function Le(n,t){if(n&1){let e=b();o(0,"div",2)(1,"header",3)(2,"div",4)(3,"h1"),s(4),i(),o(5,"div",5)(6,"mat-chip-set")(7,"mat-chip")(8,"mat-icon"),s(9),i(),s(10),P(11,"titlecase"),i()()(),o(12,"p"),s(13),i()()(),o(14,"mat-tab-group")(15,"mat-tab",6)(16,"div",7)(17,"mat-card")(18,"mat-card-content")(19,"div",8),k(20,"div",9),d(21,ze,2,1,"mat-accordion",10)(22,Te,7,1,"div",11),i()()()()(),o(23,"mat-tab",12)(24,"div",7)(25,"mat-card")(26,"mat-card-content")(27,"div",13)(28,"div",14)(29,"div",15)(30,"h3"),s(31,"HTML Code"),i(),o(32,"div",16)(33,"button",17),f("click",function(){u(e);let a=l();return x(a.copyCode())}),o(34,"mat-icon"),s(35,"content_copy"),i()(),o(36,"button",18),f("click",function(){u(e);let a=l();return x(a.resetCode())}),o(37,"mat-icon"),s(38,"restart_alt"),i()(),o(39,"button",19)(40,"mat-icon",20),s(41),i()()()(),o(42,"div",21)(43,"div",22),d(44,He,2,1,"div",23),i(),o(45,"textarea",24,0),V("ngModelChange",function(a){u(e);let p=l();return A(p.currentCode,a)||(p.currentCode=a),x(a)}),f("ngModelChange",function(){u(e);let a=l();return x(a.onCodeChange())})("scroll",function(a){u(e);let p=l();return x(p.syncScroll(a))}),s(47,"                      "),i()(),d(48,qe,2,1,"div",25),i(),o(49,"div",26)(50,"div",27)(51,"h3"),s(52,"Live Preview"),i(),o(53,"button",28),f("click",function(){u(e);let a=l();return x(a.togglePreviewMode())}),o(54,"mat-icon"),s(55),i()()(),k(56,"div",29),i()()()()()(),o(57,"mat-tab",30)(58,"div",7),d(59,Ae,7,1,"div",31)(60,Be,9,4,"mat-card",32)(61,Oe,3,0,"div",33),i()()()()}if(n&2){let e=l();r(4),h(e.content.title),r(3),S(e.content.difficulty),r(2),h(e.getDifficultyIcon(e.content.difficulty)),r(),g(" ",F(11,25,e.content.difficulty)," "),r(3),h(e.content.description),r(7),m("innerHTML",e.sanitizedExplanation,w),r(),m("ngIf",e.content.interactiveExamples),r(),m("ngIf",e.content.keyPoints),r(17),m("matBadge",e.syntaxErrors.length)("matBadgeHidden",!e.syntaxErrors.length)("matTooltip",e.syntaxErrors.length?"Syntax errors found":"No syntax errors"),r(),m("color",e.syntaxErrors.length?"warn":"primary"),r(),g(" ",e.syntaxErrors.length?"error":"check_circle"," "),r(3),m("ngForOf",e.getLineNumbers()),r(),q("ngModel",e.currentCode),r(3),m("ngIf",e.syntaxErrors.length),r(5),m("matTooltip",e.previewMode),r(2),h(e.previewMode==="desktop"?"computer":"smartphone"),r(),S(e.previewMode),m("innerHTML",e.sanitizedPreview,w),r(3),m("ngIf",e.quizComplete),r(),m("ngForOf",e.content.quiz),r(),m("ngIf",!e.quizComplete&&e.allQuestionsAnswered)}}var Ce=class n{constructor(t,e,c,a){this.route=t;this.conceptService=e;this.sanitizer=c;this.snackBar=a}content=null;userAnswers=[];currentCode="";sanitizedPreview="";sanitizedExplanation="";previewMode="desktop";quizComplete=!1;quizScore=0;syntaxErrors=[];ngOnInit(){let t=this.route.snapshot.paramMap.get("conceptId");t&&this.conceptService.getConcept(t).subscribe(e=>{e&&(this.content=e,this.currentCode=e.example,this.sanitizedPreview=this.sanitizer.bypassSecurityTrustHtml(e.example),this.sanitizedExplanation=this.sanitizer.bypassSecurityTrustHtml(e.explanation.replace(/</g,"&lt;").replace(/>/g,"&gt;")),this.checkSyntax())})}getLineNumbers(){let t=this.currentCode.split(`
`).length;return Array.from({length:t},(e,c)=>c+1)}syncScroll(t){let e=t.target,c=e.previousElementSibling;c.scrollTop=e.scrollTop}onCodeChange(){this.updatePreview(),this.checkSyntax()}checkSyntax(){this.syntaxErrors=[];let t=this.currentCode.split(`
`),e=[],c=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]);t.forEach((a,p)=>{let y=0;for(;y<a.length;){let z=a.indexOf("<",y);if(z===-1)break;let M=a.indexOf(">",z);if(M===-1){this.syntaxErrors.push({line:p+1,message:"Unclosed tag bracket"});break}let C=a.substring(z+1,M);if(y=M+1,!C.startsWith("!"))if(C.startsWith("/")){let _=C.substring(1).trim().split(" ")[0].toLowerCase(),v=e.pop();v?v.tag!==_&&(this.syntaxErrors.push({line:p+1,message:`Mismatched closing tag: expected </${v.tag}>, found </${_}>`}),e.push(v)):this.syntaxErrors.push({line:p+1,message:`Unexpected closing tag </${_}>`})}else{let _=C.trim().split(" ")[0].toLowerCase();if(!_.match(/^[a-z][a-z0-9-]*$/)){this.syntaxErrors.push({line:p+1,message:`Invalid tag name: ${_}`});continue}let v=C.match(/\s\w+(?:=(?:"[^"]*"|'[^']*'|[^\s>]+))?/g);v&&v.forEach(be=>{let[ye,T]=be.trim().split("=");T&&!T.match(/^["'][^"']*["']$/)&&this.syntaxErrors.push({line:p+1,message:`Invalid attribute value for ${ye}: missing quotes`})}),!c.has(_)&&!C.endsWith("/")&&e.push({tag:_,line:p+1})}}}),e.forEach(({tag:a,line:p})=>{this.syntaxErrors.push({line:p,message:`Unclosed tag <${a}>`})})}highlightCode(t){return this.sanitizer.bypassSecurityTrustHtml(Prism.highlight(t,Prism.languages.markup,"markup"))}sanitizeHtml(t){return this.sanitizer.bypassSecurityTrustHtml(t)}tryExample(t){if(this.content?.interactiveExamples){let e=this.content.interactiveExamples[t];this.currentCode=e.code,this.updatePreview(),this.checkSyntax()}}getDifficultyIcon(t){switch(t){case"beginner":return"school";case"intermediate":return"trending_up";case"advanced":return"psychology";default:return"help"}}togglePreviewMode(){this.previewMode=this.previewMode==="desktop"?"mobile":"desktop"}copyCode(){navigator.clipboard.writeText(this.currentCode),this.snackBar.open("Code copied to clipboard!","Close",{duration:2e3})}resetCode(){this.content&&(this.currentCode=this.content.example,this.updatePreview())}updatePreview(){this.sanitizedPreview=this.sanitizer.bypassSecurityTrustHtml(this.currentCode)}checkAnswer(t,e){this.quizComplete||(this.userAnswers[t]=e)}isAnswerCorrect(t){return this.content?this.content.quiz[t].correctAnswer===this.userAnswers[t]:!1}get allQuestionsAnswered(){return this.content?this.userAnswers.length===this.content.quiz.length:!1}completeQuiz(){this.quizComplete=!0,this.calculateQuizScore()}resetQuiz(){this.userAnswers=[],this.quizComplete=!1,this.quizScore=0}calculateQuizScore(){if(!this.content)return;let t=this.userAnswers.reduce((e,c,a)=>e+(this.isAnswerCorrect(a)?1:0),0);this.quizScore=Math.round(t/this.content.quiz.length*100)}getAnswerColor(t,e){return this.userAnswers[t]===void 0||!this.content?null:this.content.quiz[t].correctAnswer===e?"primary":this.userAnswers[t]===e?"warn":null}static \u0275fac=function(e){return new(e||n)(E(N),E(oe),E($),E(se))};static \u0275cmp=H({type:n,selectors:[["app-html-concept"]],decls:1,vars:1,consts:[["codeEditor",""],["class","concept-container",4,"ngIf"],[1,"concept-container"],[1,"concept-header"],[1,"header-content"],[1,"concept-meta"],["label","Explanation"],[1,"tab-content"],[1,"explanation-content"],[3,"innerHTML"],["class","interactive-examples",4,"ngIf"],["class","key-points",4,"ngIf"],["label","Example"],[1,"example-container"],[1,"code-section"],[1,"code-header"],[1,"code-actions"],["mat-icon-button","","matTooltip","Copy to clipboard",3,"click"],["mat-icon-button","","matTooltip","Reset code",3,"click"],["mat-icon-button","","matBadgeColor","warn",3,"matBadge","matBadgeHidden","matTooltip"],[3,"color"],[1,"code-editor"],[1,"line-numbers"],["class","line-number",4,"ngFor","ngForOf"],["rows","10","spellcheck","false",3,"ngModelChange","scroll","ngModel"],["class","syntax-errors",4,"ngIf"],[1,"preview-section"],[1,"preview-header"],["mat-icon-button","",3,"click","matTooltip"],[1,"preview-container",3,"innerHTML"],["label","Quiz"],["class","quiz-header",4,"ngIf"],["class","quiz-card",4,"ngFor","ngForOf"],["class","quiz-actions",4,"ngIf"],[1,"interactive-examples"],[4,"ngFor","ngForOf"],[1,"example-description"],[1,"mini-editor"],["mat-icon-button","","matTooltip","Try this example",3,"click"],[1,"code-block"],["class","example-result",4,"ngIf"],[1,"example-result"],[1,"key-points"],[1,"key-point-text"],[1,"line-number"],[1,"syntax-errors"],["class","error",4,"ngFor","ngForOf"],[1,"error"],["color","warn"],[1,"quiz-header"],["mat-button","","color","primary",3,"click"],[1,"quiz-card"],[1,"options"],["mat-button","",3,"disabled","color","click",4,"ngFor","ngForOf"],["class","answer-feedback",4,"ngIf"],["mat-button","",3,"click","disabled","color"],[1,"answer-feedback"],["class","explanation",4,"ngIf"],[1,"explanation"],[1,"quiz-actions"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,c){e&1&&d(0,Le,62,27,"div",1),e&2&&m("ngIf",c.content)},dependencies:[Q,B,O,L,W,j,D,R,K,U,G,Y,J,X,ee,Z,ce,re,ae,ne,te,ie,le,pe,me,_e,ge,de,ue,fe,xe,ve,he],styles:[`.concept-container{max-width:1200px;margin:0 auto;padding:20px}.concept-header{margin-bottom:2rem}.header-content h1{font-size:2.5rem;margin-bottom:1rem}.header-content p{font-size:1.1rem;line-height:1.6;color:#000000b3}.concept-meta{margin:1rem 0}.tab-content{margin-top:1rem}.explanation-content{font-size:1.1rem;line-height:1.6}.interactive-examples{margin:2rem 0}.mini-editor{background:#f5f5f5;border-radius:4px;padding:1rem;margin:1rem 0}.code-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.code-block{background:#1e1e1e;border-radius:4px;padding:1rem;margin:0;overflow-x:auto}.example-result{margin-top:1rem;padding:1rem;background:#fff;border-radius:4px;border:1px solid #e0e0e0}.key-points{margin-top:2rem;padding:1.5rem;background:#f8f9fa;border-radius:8px}.key-points h3{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}.key-points ul{list-style:none;padding:0;margin:0}.key-points li{display:flex;align-items:flex-start;gap:.5rem;margin-bottom:.8rem}.key-points li mat-icon{color:#4caf50;font-size:20px}@media (max-width: 768px){.concept-container{padding:12px}.header-content h1{font-size:1.8rem}.header-content p,.explanation-content{font-size:1rem}.example-description{display:none}.mini-editor{padding:.5rem}.code-block{padding:.5rem;font-size:.9rem}.key-points{padding:1rem}.key-points li{gap:.3rem;margin-bottom:.6rem}.key-points li .key-point-text{font-size:.95rem}}@media (max-width: 480px){.concept-container{padding:8px}.header-content h1{font-size:1.5rem}.mat-expansion-panel-header{padding:0 12px}}.example-container{display:grid;grid-template-columns:1fr 1fr;gap:2rem;margin-top:1rem}.example-container .code-section{background-color:#272822;border-radius:4px}.example-container .code-section .code-header{display:flex;justify-content:space-between;align-items:center;padding:.5rem 1rem;background-color:#1e1f1c;border-radius:4px 4px 0 0}.example-container .code-section .code-header h3{color:#f8f8f2;margin:0}.example-container .code-section .code-header .code-actions{display:flex;gap:.5rem}.example-container .code-section .code-header button{color:#f8f8f2}.example-container .code-section .code-editor{padding:1rem;display:flex;gap:1rem}.example-container .code-section .code-editor .line-numbers{-webkit-user-select:none;user-select:none;text-align:right;color:#75715e;padding-right:.5rem;border-right:1px solid #3c3d37}.example-container .code-section .code-editor .line-numbers .line-number{font-family:Fira Code,monospace;font-size:.9rem;line-height:1.5}.example-container .code-section .code-editor textarea{flex:1;min-height:300px;background-color:#272822;color:#f8f8f2;border:none;font-family:Fira Code,monospace;font-size:.9rem;resize:vertical;padding:0 .5rem;outline:none;line-height:1.5}.example-container .code-section .code-editor textarea:focus{outline:1px solid #525252}.example-container .code-section .syntax-errors{padding:1rem;background-color:#1e1f1c;border-top:1px solid #3c3d37}.example-container .code-section .syntax-errors .error{display:flex;align-items:center;gap:.5rem;color:#f44336;font-size:.9rem;margin-bottom:.5rem}.example-container .code-section .syntax-errors .error:last-child{margin-bottom:0}.example-container .preview-section{border:1px solid #e0e0e0;border-radius:4px}.example-container .preview-section .preview-header{display:flex;justify-content:space-between;align-items:center;padding:.5rem 1rem;border-bottom:1px solid #e0e0e0}.example-container .preview-section .preview-header h3{margin:0;color:#333}.example-container .preview-section .preview-container{min-height:300px;padding:1rem;background-color:#fff;overflow:auto}.example-container .preview-section .preview-container.mobile{max-width:375px;margin:0 auto;border:10px solid #333;border-radius:20px;min-height:600px}.quiz-card{margin-bottom:1rem}.quiz-card .options{display:flex;flex-direction:column;gap:.5rem;margin-top:1rem}.quiz-card .answer-feedback{margin-top:1rem;padding:1rem;border-radius:4px}.quiz-card .answer-feedback .correct{color:#4caf50;font-weight:700}.quiz-card .answer-feedback .incorrect{color:#f44336;font-weight:700}.quiz-card .answer-feedback .explanation{margin-top:.5rem;color:#666}.quiz-header{text-align:center;margin-bottom:2rem}.quiz-header h3{color:#333;margin-bottom:.5rem}.quiz-header p{font-size:1.2rem;color:#666;margin-bottom:1rem}.quiz-actions{display:flex;justify-content:center;margin-top:2rem}mat-chip.beginner{background-color:#4caf50;color:#fff}mat-chip.intermediate{background-color:#ff9800;color:#fff}mat-chip.advanced{background-color:#f44336;color:#fff}
`],encapsulation:2})};export{Ce as HtmlConceptComponent};
