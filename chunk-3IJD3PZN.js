import"./chunk-KVVCMORN.js";import{a as oe}from"./chunk-HLC5ZJ4Y.js";import{a as Ee}from"./chunk-2NGMF4E2.js";import{a as re,b as ae,c as ce,d as se,e as le,f as me,g as pe,h as de,i as ue,j as xe,k as fe,l as ge,m as _e,n as ve,o as he}from"./chunk-I7AWFKUK.js";import{s as te,t as ne,u as ie}from"./chunk-NKPZFQ4M.js";import{a as K,b as J,c as X,f as Y,h as Z,j as ee}from"./chunk-WJCE3IO6.js";import{a as j,c as D,f as R}from"./chunk-MEURHACS.js";import{e as $,f as N,ja as W,ka as U,la as G}from"./chunk-IOL6GJYU.js";import"./chunk-HU7WFQWJ.js";import{$b as A,Eb as o,Ec as B,Fb as n,Fc as O,Gb as S,Hb as b,Hc as L,Ic as Q,Kb as g,Mb as l,Wb as s,Xb as h,Ya as w,Yb as f,Zb as I,_a as r,_b as q,ac as V,db as E,e as we,fc as P,gc as F,kb as H,la as u,ma as x,ob as d,vb as m,yb as k}from"./chunk-GQ4PJ4JO.js";var xt=we(Ee());function Se(i,t){if(i&1&&(o(0,"div",39)(1,"strong"),s(2,"Result:"),n(),S(3,"div",9),n()),i&2){let e=l().$implicit,c=l(3);r(3),m("innerHTML",c.sanitizeHtml(e.result),w)}}function ke(i,t){if(i&1){let e=b();o(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),s(4,"code"),n(),s(5),n(),o(6,"mat-panel-description"),s(7," Try it yourself! "),n()(),o(8,"div",36)(9,"div",15)(10,"span"),s(11,"Code:"),n(),o(12,"button",37),g("click",function(){let a=u(e).index,p=l(3);return x(p.tryExample(a))}),o(13,"mat-icon"),s(14,"play_arrow"),n()()(),o(15,"pre"),S(16,"code",9),n(),d(17,Se,4,1,"div",38),n()()}if(i&2){let e=t.$implicit,c=t.index,a=l(3);r(5),f(" Interactive Example ",c+1," "),r(11),m("innerHTML",a.highlightCode(e.code),w),r(),m("ngIf",e.result)}}function ze(i,t){if(i&1&&(o(0,"mat-accordion",34),d(1,ke,18,3,"mat-expansion-panel",35),n()),i&2){let e=l(2);r(),m("ngForOf",e.content.interactiveExamples)}}function Me(i,t){if(i&1&&(o(0,"li")(1,"mat-icon"),s(2,"check_circle"),n(),s(3),n()),i&2){let e=t.$implicit;r(3),f(" ",e," ")}}function Te(i,t){if(i&1&&(o(0,"div",40)(1,"h3")(2,"mat-icon"),s(3,"lightbulb"),n(),s(4," Key Points "),n(),o(5,"ul"),d(6,Me,4,1,"li",35),n()()),i&2){let e=l(2);r(6),m("ngForOf",e.content.keyPoints)}}function He(i,t){if(i&1&&(o(0,"div",41),s(1),n()),i&2){let e=t.$implicit;r(),h(e)}}function Ie(i,t){if(i&1&&(o(0,"div",44)(1,"mat-icon",45),s(2,"error"),n(),o(3,"span"),s(4),n()()),i&2){let e=t.$implicit;r(4),I("Line ",e.line,": ",e.message,"")}}function qe(i,t){if(i&1&&(o(0,"div",42),d(1,Ie,5,2,"div",43),n()),i&2){let e=l(2);r(),m("ngForOf",e.syntaxErrors)}}function Ae(i,t){if(i&1){let e=b();o(0,"div",46)(1,"h3"),s(2,"Quiz Results"),n(),o(3,"p"),s(4),n(),o(5,"button",47),g("click",function(){u(e);let a=l(2);return x(a.resetQuiz())}),s(6,"Retake Quiz"),n()()}if(i&2){let e=l(2);r(4),f("Score: ",e.quizScore,"%")}}function Ve(i,t){if(i&1){let e=b();o(0,"button",52),g("click",function(){let a=u(e).index,p=l().index,y=l(2);return x(y.checkAnswer(p,a))}),s(1),n()}if(i&2){let e=t.$implicit,c=t.index,a=l().index,p=l(2);m("disabled",p.quizComplete)("color",p.getAnswerColor(a,c)),r(),f(" ",e," ")}}function Pe(i,t){if(i&1&&(o(0,"p",55),s(1),n()),i&2){let e=l(2).index,c=l(2);r(),f(" The correct answer is: ",c.content.quiz[e].options[c.content.quiz[e].correctAnswer]," ")}}function Fe(i,t){if(i&1&&(o(0,"div",53)(1,"p"),s(2),n(),d(3,Pe,2,1,"p",54),n()),i&2){let e=l().index,c=l(2);r(),k(c.isAnswerCorrect(e)?"correct":"incorrect"),r(),f(" ",c.isAnswerCorrect(e)?"\u2713 Correct!":"\u2717 Incorrect"," "),r(),m("ngIf",!c.isAnswerCorrect(e))}}function Be(i,t){if(i&1&&(o(0,"mat-card",48)(1,"mat-card-content")(2,"h3"),s(3),n(),o(4,"p"),s(5),n(),o(6,"div",49),d(7,Ve,2,3,"button",50),n(),d(8,Fe,4,4,"div",51),n()()),i&2){let e=t.$implicit,c=t.index,a=l(2);r(3),f("Question ",c+1,""),r(2),h(e.question),r(2),m("ngForOf",e.options),r(),m("ngIf",a.userAnswers[c]!==void 0)}}function Oe(i,t){if(i&1){let e=b();o(0,"div",56)(1,"button",57),g("click",function(){u(e);let a=l(2);return x(a.completeQuiz())}),s(2," Submit Quiz "),n()()}}function Le(i,t){if(i&1){let e=b();o(0,"div",2)(1,"header",3)(2,"div",4)(3,"h1"),s(4),n(),o(5,"div",5)(6,"mat-chip-set")(7,"mat-chip")(8,"mat-icon"),s(9),n(),s(10),P(11,"titlecase"),n()()(),o(12,"p"),s(13),n()()(),o(14,"mat-tab-group")(15,"mat-tab",6)(16,"div",7)(17,"mat-card")(18,"mat-card-content")(19,"div",8),S(20,"div",9),d(21,ze,2,1,"mat-accordion",10)(22,Te,7,1,"div",11),n()()()()(),o(23,"mat-tab",12)(24,"div",7)(25,"mat-card")(26,"mat-card-content")(27,"div",13)(28,"div",14)(29,"div",15)(30,"h3"),s(31,"HTML Code"),n(),o(32,"div",16)(33,"button",17),g("click",function(){u(e);let a=l();return x(a.copyCode())}),o(34,"mat-icon"),s(35,"content_copy"),n()(),o(36,"button",18),g("click",function(){u(e);let a=l();return x(a.resetCode())}),o(37,"mat-icon"),s(38,"restart_alt"),n()(),o(39,"button",19)(40,"mat-icon",20),s(41),n()()()(),o(42,"div",21)(43,"div",22),d(44,He,2,1,"div",23),n(),o(45,"textarea",24,0),V("ngModelChange",function(a){u(e);let p=l();return A(p.currentCode,a)||(p.currentCode=a),x(a)}),g("ngModelChange",function(){u(e);let a=l();return x(a.onCodeChange())})("scroll",function(a){u(e);let p=l();return x(p.syncScroll(a))}),s(47,"                      "),n()(),d(48,qe,2,1,"div",25),n(),o(49,"div",26)(50,"div",27)(51,"h3"),s(52,"Live Preview"),n(),o(53,"button",28),g("click",function(){u(e);let a=l();return x(a.togglePreviewMode())}),o(54,"mat-icon"),s(55),n()()(),S(56,"div",29),n()()()()()(),o(57,"mat-tab",30)(58,"div",7),d(59,Ae,7,1,"div",31)(60,Be,9,4,"mat-card",32)(61,Oe,3,0,"div",33),n()()()()}if(i&2){let e=l();r(4),h(e.content.title),r(3),k(e.content.difficulty),r(2),h(e.getDifficultyIcon(e.content.difficulty)),r(),f(" ",F(11,25,e.content.difficulty)," "),r(3),h(e.content.description),r(7),m("innerHTML",e.sanitizedExplanation,w),r(),m("ngIf",e.content.interactiveExamples),r(),m("ngIf",e.content.keyPoints),r(17),m("matBadge",e.syntaxErrors.length)("matBadgeHidden",!e.syntaxErrors.length)("matTooltip",e.syntaxErrors.length?"Syntax errors found":"No syntax errors"),r(),m("color",e.syntaxErrors.length?"warn":"primary"),r(),f(" ",e.syntaxErrors.length?"error":"check_circle"," "),r(3),m("ngForOf",e.getLineNumbers()),r(),q("ngModel",e.currentCode),r(3),m("ngIf",e.syntaxErrors.length),r(5),m("matTooltip",e.previewMode),r(2),h(e.previewMode==="desktop"?"computer":"smartphone"),r(),k(e.previewMode),m("innerHTML",e.sanitizedPreview,w),r(3),m("ngIf",e.quizComplete),r(),m("ngForOf",e.content.quiz),r(),m("ngIf",!e.quizComplete&&e.allQuestionsAnswered)}}var Ce=class i{constructor(t,e,c,a){this.route=t;this.conceptService=e;this.sanitizer=c;this.snackBar=a}content=null;userAnswers=[];currentCode="";sanitizedPreview="";sanitizedExplanation="";previewMode="desktop";quizComplete=!1;quizScore=0;syntaxErrors=[];ngOnInit(){let t=this.route.snapshot.paramMap.get("conceptId");t&&this.conceptService.getConcept(t).subscribe(e=>{e&&(this.content=e,this.currentCode=e.example,this.sanitizedPreview=this.sanitizer.bypassSecurityTrustHtml(e.example),this.sanitizedExplanation=this.sanitizer.bypassSecurityTrustHtml(e.explanation.replace(/</g,"&lt;").replace(/>/g,"&gt;")),this.checkSyntax())})}getLineNumbers(){let t=this.currentCode.split(`
`).length;return Array.from({length:t},(e,c)=>c+1)}syncScroll(t){let e=t.target,c=e.previousElementSibling;c.scrollTop=e.scrollTop}onCodeChange(){this.updatePreview(),this.checkSyntax()}checkSyntax(){this.syntaxErrors=[];let t=this.currentCode.split(`
`),e=[],c=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]);t.forEach((a,p)=>{let y=0;for(;y<a.length;){let z=a.indexOf("<",y);if(z===-1)break;let M=a.indexOf(">",z);if(M===-1){this.syntaxErrors.push({line:p+1,message:"Unclosed tag bracket"});break}let C=a.substring(z+1,M);if(y=M+1,!C.startsWith("!"))if(C.startsWith("/")){let _=C.substring(1).trim().split(" ")[0].toLowerCase(),v=e.pop();v?v.tag!==_&&(this.syntaxErrors.push({line:p+1,message:`Mismatched closing tag: expected </${v.tag}>, found </${_}>`}),e.push(v)):this.syntaxErrors.push({line:p+1,message:`Unexpected closing tag </${_}>`})}else{let _=C.trim().split(" ")[0].toLowerCase();if(!_.match(/^[a-z][a-z0-9-]*$/)){this.syntaxErrors.push({line:p+1,message:`Invalid tag name: ${_}`});continue}let v=C.match(/\s\w+(?:=(?:"[^"]*"|'[^']*'|[^\s>]+))?/g);v&&v.forEach(be=>{let[ye,T]=be.trim().split("=");T&&!T.match(/^["'][^"']*["']$/)&&this.syntaxErrors.push({line:p+1,message:`Invalid attribute value for ${ye}: missing quotes`})}),!c.has(_)&&!C.endsWith("/")&&e.push({tag:_,line:p+1})}}}),e.forEach(({tag:a,line:p})=>{this.syntaxErrors.push({line:p,message:`Unclosed tag <${a}>`})})}highlightCode(t){return this.sanitizer.bypassSecurityTrustHtml(Prism.highlight(t,Prism.languages.markup,"markup"))}sanitizeHtml(t){return this.sanitizer.bypassSecurityTrustHtml(t)}tryExample(t){if(this.content?.interactiveExamples){let e=this.content.interactiveExamples[t];this.currentCode=e.code,this.updatePreview(),this.checkSyntax()}}getDifficultyIcon(t){switch(t){case"beginner":return"school";case"intermediate":return"trending_up";case"advanced":return"psychology";default:return"help"}}togglePreviewMode(){this.previewMode=this.previewMode==="desktop"?"mobile":"desktop"}copyCode(){navigator.clipboard.writeText(this.currentCode),this.snackBar.open("Code copied to clipboard!","Close",{duration:2e3})}resetCode(){this.content&&(this.currentCode=this.content.example,this.updatePreview())}updatePreview(){this.sanitizedPreview=this.sanitizer.bypassSecurityTrustHtml(this.currentCode)}checkAnswer(t,e){this.quizComplete||(this.userAnswers[t]=e)}isAnswerCorrect(t){return this.content?this.content.quiz[t].correctAnswer===this.userAnswers[t]:!1}get allQuestionsAnswered(){return this.content?this.userAnswers.length===this.content.quiz.length:!1}completeQuiz(){this.quizComplete=!0,this.calculateQuizScore()}resetQuiz(){this.userAnswers=[],this.quizComplete=!1,this.quizScore=0}calculateQuizScore(){if(!this.content)return;let t=this.userAnswers.reduce((e,c,a)=>e+(this.isAnswerCorrect(a)?1:0),0);this.quizScore=Math.round(t/this.content.quiz.length*100)}getAnswerColor(t,e){return this.userAnswers[t]===void 0||!this.content?null:this.content.quiz[t].correctAnswer===e?"primary":this.userAnswers[t]===e?"warn":null}static \u0275fac=function(e){return new(e||i)(E(N),E(oe),E($),E(se))};static \u0275cmp=H({type:i,selectors:[["app-html-concept"]],decls:1,vars:1,consts:[["codeEditor",""],["class","concept-container",4,"ngIf"],[1,"concept-container"],[1,"concept-header"],[1,"header-content"],[1,"concept-meta"],["label","Explanation"],[1,"tab-content"],[1,"explanation-content"],[3,"innerHTML"],["class","interactive-examples",4,"ngIf"],["class","key-points",4,"ngIf"],["label","Example"],[1,"example-container"],[1,"code-section"],[1,"code-header"],[1,"code-actions"],["mat-icon-button","","matTooltip","Copy to clipboard",3,"click"],["mat-icon-button","","matTooltip","Reset code",3,"click"],["mat-icon-button","","matBadgeColor","warn",3,"matBadge","matBadgeHidden","matTooltip"],[3,"color"],[1,"code-editor"],[1,"line-numbers"],["class","line-number",4,"ngFor","ngForOf"],["rows","10","spellcheck","false",3,"ngModelChange","scroll","ngModel"],["class","syntax-errors",4,"ngIf"],[1,"preview-section"],[1,"preview-header"],["mat-icon-button","",3,"click","matTooltip"],[1,"preview-container",3,"innerHTML"],["label","Quiz"],["class","quiz-header",4,"ngIf"],["class","quiz-card",4,"ngFor","ngForOf"],["class","quiz-actions",4,"ngIf"],[1,"interactive-examples"],[4,"ngFor","ngForOf"],[1,"mini-editor"],["mat-icon-button","","matTooltip","Try this example",3,"click"],["class","example-result",4,"ngIf"],[1,"example-result"],[1,"key-points"],[1,"line-number"],[1,"syntax-errors"],["class","error",4,"ngFor","ngForOf"],[1,"error"],["color","warn"],[1,"quiz-header"],["mat-button","","color","primary",3,"click"],[1,"quiz-card"],[1,"options"],["mat-button","",3,"disabled","color","click",4,"ngFor","ngForOf"],["class","answer-feedback",4,"ngIf"],["mat-button","",3,"click","disabled","color"],[1,"answer-feedback"],["class","explanation",4,"ngIf"],[1,"explanation"],[1,"quiz-actions"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,c){e&1&&d(0,Le,62,27,"div",1),e&2&&m("ngIf",c.content)},dependencies:[Q,B,O,L,ee,X,Y,Z,R,j,D,G,W,U,J,K,ce,re,ae,ie,te,ne,le,pe,me,_e,ge,de,ue,fe,xe,he,ve],styles:[`.concept-container{max-width:1000px;margin:0 auto;padding:2rem}.concept-container .concept-header{text-align:center;margin-bottom:2rem}.concept-container .concept-header .header-content{margin-bottom:1rem}.concept-container .concept-header h1{font-size:2.5rem;color:#333;margin-bottom:1rem}.concept-container .concept-header p{font-size:1.2rem;color:#666}.concept-container .concept-header .concept-meta{display:flex;justify-content:center;margin-bottom:1rem}.concept-container .explanation-content .interactive-examples{margin-top:2rem}.concept-container .explanation-content .interactive-examples .mini-editor{margin-top:1rem}.concept-container .explanation-content .interactive-examples .mini-editor .code-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.concept-container .explanation-content .interactive-examples .mini-editor pre{background-color:#272822;padding:1rem;border-radius:4px;margin:0}.concept-container .explanation-content .interactive-examples .mini-editor .example-result{margin-top:1rem;padding:1rem;background-color:#f5f5f5;border-radius:4px}.concept-container .explanation-content .key-points{margin-top:2rem;padding:1rem;background-color:#e3f2fd;border-radius:4px}.concept-container .explanation-content .key-points h3{display:flex;align-items:center;gap:.5rem;color:#1976d2;margin-top:0}.concept-container .explanation-content .key-points ul{list-style:none;padding:0;margin:0}.concept-container .explanation-content .key-points ul li{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem}.concept-container .explanation-content .key-points ul li mat-icon{color:#4caf50;font-size:1.2rem}.concept-container .tab-content{padding:2rem 0}.concept-container .tab-content pre{margin:0;border-radius:4px}.concept-container .tab-content code{font-family:Fira Code,monospace;font-size:.9rem}.concept-container .example-container{display:grid;grid-template-columns:1fr 1fr;gap:2rem;margin-top:1rem}.concept-container .example-container .code-section{background-color:#272822;border-radius:4px}.concept-container .example-container .code-section .code-header{display:flex;justify-content:space-between;align-items:center;padding:.5rem 1rem;background-color:#1e1f1c;border-radius:4px 4px 0 0}.concept-container .example-container .code-section .code-header h3{color:#f8f8f2;margin:0}.concept-container .example-container .code-section .code-header .code-actions{display:flex;gap:.5rem}.concept-container .example-container .code-section .code-header button{color:#f8f8f2}.concept-container .example-container .code-section .code-editor{padding:1rem;display:flex;gap:1rem}.concept-container .example-container .code-section .code-editor .line-numbers{-webkit-user-select:none;user-select:none;text-align:right;color:#75715e;padding-right:.5rem;border-right:1px solid #3c3d37}.concept-container .example-container .code-section .code-editor .line-numbers .line-number{font-family:Fira Code,monospace;font-size:.9rem;line-height:1.5}.concept-container .example-container .code-section .code-editor textarea{flex:1;min-height:300px;background-color:#272822;color:#f8f8f2;border:none;font-family:Fira Code,monospace;font-size:.9rem;resize:vertical;padding:0 .5rem;outline:none;line-height:1.5}.concept-container .example-container .code-section .code-editor textarea:focus{outline:1px solid #525252}.concept-container .example-container .code-section .syntax-errors{padding:1rem;background-color:#1e1f1c;border-top:1px solid #3c3d37}.concept-container .example-container .code-section .syntax-errors .error{display:flex;align-items:center;gap:.5rem;color:#f44336;font-size:.9rem;margin-bottom:.5rem}.concept-container .example-container .code-section .syntax-errors .error:last-child{margin-bottom:0}.concept-container .example-container .preview-section{border:1px solid #e0e0e0;border-radius:4px}.concept-container .example-container .preview-section .preview-header{display:flex;justify-content:space-between;align-items:center;padding:.5rem 1rem;border-bottom:1px solid #e0e0e0}.concept-container .example-container .preview-section .preview-header h3{margin:0;color:#333}.concept-container .example-container .preview-section .preview-container{min-height:300px;padding:1rem;background-color:#fff;overflow:auto}.concept-container .example-container .preview-section .preview-container.mobile{max-width:375px;margin:0 auto;border:10px solid #333;border-radius:20px;min-height:600px}.concept-container .quiz-card{margin-bottom:1rem}.concept-container .quiz-card .options{display:flex;flex-direction:column;gap:.5rem;margin-top:1rem}.concept-container .quiz-card .answer-feedback{margin-top:1rem;padding:1rem;border-radius:4px}.concept-container .quiz-card .answer-feedback .correct{color:#4caf50;font-weight:700}.concept-container .quiz-card .answer-feedback .incorrect{color:#f44336;font-weight:700}.concept-container .quiz-card .answer-feedback .explanation{margin-top:.5rem;color:#666}.concept-container .quiz-header{text-align:center;margin-bottom:2rem}.concept-container .quiz-header h3{color:#333;margin-bottom:.5rem}.concept-container .quiz-header p{font-size:1.2rem;color:#666;margin-bottom:1rem}.concept-container .quiz-actions{display:flex;justify-content:center;margin-top:2rem}.concept-container mat-chip.beginner{background-color:#4caf50;color:#fff}.concept-container mat-chip.intermediate{background-color:#ff9800;color:#fff}.concept-container mat-chip.advanced{background-color:#f44336;color:#fff}
`],encapsulation:2})};export{Ce as HtmlConceptComponent};
