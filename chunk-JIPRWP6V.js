import{a as re}from"./chunk-VVFH5EUH.js";import"./chunk-KVVCMORN.js";import{a as le,b as se,c as pe,d as ue,e as xe,f as ge,g as ve,h as _e,i as he,j as fe}from"./chunk-I5NUPPUL.js";import{a as me,b as de,c as ke}from"./chunk-SAKY64NC.js";import{a as te,b as ie,c as ne}from"./chunk-DS7C3VR3.js";import{a as oe,b as ae,c as ce}from"./chunk-GB3SLZ5C.js";import"./chunk-BOVM3J36.js";import{b as j,e as D,h as R,k as W,m as Z,n as ee}from"./chunk-6G7AELGY.js";import"./chunk-HU7WFQWJ.js";import{a as U,c as G,g as K}from"./chunk-GNCRMOT5.js";import{f as $,g as N,la as J,ma as X,na as Y}from"./chunk-PRMV7CGH.js";import{$a as o,$b as A,Fb as r,Fc as B,Gb as i,Gc as O,Hb as E,Ib as C,Jc as L,Kc as Q,Lb as g,Nb as s,Xb as l,Yb as h,Za as w,Zb as v,_b as I,ac as q,bc as V,e as we,eb as k,gc as P,hc as F,lb as H,ma as u,na as x,pb as p,wb as m,zb as S}from"./chunk-FJLZPIOP.js";var xt=we(ke());function Ee(n,t){if(n&1&&(r(0,"div",41)(1,"strong"),l(2,"Result:"),i(),E(3,"div",9),i()),n&2){let e=s().$implicit,c=s(3);o(3),m("innerHTML",c.sanitizeHtml(e.result),w)}}function Se(n,t){if(n&1){let e=C();r(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),l(4,"code"),i(),l(5),i(),r(6,"mat-panel-description",36),l(7," Try it yourself! "),i()(),r(8,"div",37)(9,"div",15)(10,"span"),l(11,"Code:"),i(),r(12,"button",38),g("click",function(){let a=u(e).index,d=s(3);return x(d.tryExample(a))}),r(13,"mat-icon"),l(14,"play_arrow"),i()()(),r(15,"pre",39),E(16,"code",9),i(),p(17,Ee,4,1,"div",40),i()()}if(n&2){let e=t.$implicit,c=t.index,a=s(3);o(5),v(" Interactive Example ",c+1," "),o(11),m("innerHTML",a.highlightCode(e.code),w),o(),m("ngIf",e.result)}}function Me(n,t){if(n&1&&(r(0,"mat-accordion",34),p(1,Se,18,3,"mat-expansion-panel",35),i()),n&2){let e=s(2);o(),m("ngForOf",e.content.interactiveExamples)}}function ze(n,t){if(n&1&&(r(0,"li")(1,"mat-icon"),l(2,"check_circle"),i(),r(3,"span",43),l(4),i()()),n&2){let e=t.$implicit;o(4),h(e)}}function Te(n,t){if(n&1&&(r(0,"div",42)(1,"h3")(2,"mat-icon"),l(3,"lightbulb"),i(),l(4," Key Points "),i(),r(5,"ul"),p(6,ze,5,1,"li",35),i()()),n&2){let e=s(2);o(6),m("ngForOf",e.content.keyPoints)}}function He(n,t){if(n&1&&(r(0,"div",44),l(1),i()),n&2){let e=t.$implicit;o(),h(e)}}function Ie(n,t){if(n&1&&(r(0,"div",47)(1,"mat-icon",48),l(2,"error"),i(),r(3,"span"),l(4),i()()),n&2){let e=t.$implicit;o(4),I("Line ",e.line,": ",e.message,"")}}function Ae(n,t){if(n&1&&(r(0,"div",45),p(1,Ie,5,2,"div",46),i()),n&2){let e=s(2);o(),m("ngForOf",e.syntaxErrors)}}function qe(n,t){if(n&1){let e=C();r(0,"div",49)(1,"h3"),l(2,"Quiz Results"),i(),r(3,"p"),l(4),i(),r(5,"button",50),g("click",function(){u(e);let a=s(2);return x(a.resetQuiz())}),l(6,"Retake Quiz"),i()()}if(n&2){let e=s(2);o(4),v("Score: ",e.quizScore,"%")}}function Ve(n,t){if(n&1){let e=C();r(0,"button",55),g("click",function(){let a=u(e).index,d=s().index,y=s(2);return x(y.checkAnswer(d,a))}),l(1),i()}if(n&2){let e=t.$implicit,c=t.index,a=s().index,d=s(2);m("disabled",d.quizComplete)("color",d.getAnswerColor(a,c)),o(),v(" ",e," ")}}function Pe(n,t){if(n&1&&(r(0,"p",58),l(1),i()),n&2){let e=s(2).index,c=s(2);o(),v(" The correct answer is: ",c.content.quiz[e].options[c.content.quiz[e].correctAnswer]," ")}}function Fe(n,t){if(n&1&&(r(0,"div",56)(1,"p"),l(2),i(),p(3,Pe,2,1,"p",57),i()),n&2){let e=s().index,c=s(2);o(),S(c.isAnswerCorrect(e)?"correct":"incorrect"),o(),v(" ",c.isAnswerCorrect(e)?"\u2713 Correct!":"\u2717 Incorrect"," "),o(),m("ngIf",!c.isAnswerCorrect(e))}}function Be(n,t){if(n&1&&(r(0,"mat-card",51)(1,"mat-card-content")(2,"h3"),l(3),i(),r(4,"p"),l(5),i(),r(6,"div",52),p(7,Ve,2,3,"button",53),i(),p(8,Fe,4,4,"div",54),i()()),n&2){let e=t.$implicit,c=t.index,a=s(2);o(3),v("Question ",c+1,""),o(2),h(e.question),o(2),m("ngForOf",e.options),o(),m("ngIf",a.userAnswers[c]!==void 0)}}function Oe(n,t){if(n&1){let e=C();r(0,"div",59)(1,"button",60),g("click",function(){u(e);let a=s(2);return x(a.completeQuiz())}),l(2," Submit Quiz "),i()()}}function Le(n,t){if(n&1){let e=C();r(0,"div",2)(1,"header",3)(2,"div",4)(3,"h1"),l(4),i(),r(5,"div",5)(6,"mat-chip-set")(7,"mat-chip")(8,"mat-icon"),l(9),i(),l(10),P(11,"titlecase"),i()()(),r(12,"p"),l(13),i()()(),r(14,"mat-tab-group")(15,"mat-tab",6)(16,"div",7)(17,"mat-card")(18,"mat-card-content")(19,"div",8),E(20,"div",9),p(21,Me,2,1,"mat-accordion",10)(22,Te,7,1,"div",11),i()()()()(),r(23,"mat-tab",12)(24,"div",7)(25,"mat-card")(26,"mat-card-content")(27,"div",13)(28,"div",14)(29,"div",15)(30,"h3"),l(31,"HTML Code"),i(),r(32,"div",16)(33,"button",17),g("click",function(){u(e);let a=s();return x(a.copyCode())}),r(34,"mat-icon"),l(35,"content_copy"),i()(),r(36,"button",18),g("click",function(){u(e);let a=s();return x(a.resetCode())}),r(37,"mat-icon"),l(38,"restart_alt"),i()(),r(39,"button",19)(40,"mat-icon",20),l(41),i()()()(),r(42,"div",21)(43,"div",22),p(44,He,2,1,"div",23),i(),r(45,"textarea",24,0),V("ngModelChange",function(a){u(e);let d=s();return q(d.currentCode,a)||(d.currentCode=a),x(a)}),g("ngModelChange",function(){u(e);let a=s();return x(a.onCodeChange())})("scroll",function(a){u(e);let d=s();return x(d.syncScroll(a))}),l(47,"                      "),i()(),p(48,Ae,2,1,"div",25),i(),r(49,"div",26)(50,"div",27)(51,"h3"),l(52,"Live Preview"),i(),r(53,"button",28),g("click",function(){u(e);let a=s();return x(a.togglePreviewMode())}),r(54,"mat-icon"),l(55),i()()(),E(56,"div",29),i()()()()()(),r(57,"mat-tab",30)(58,"div",7),p(59,qe,7,1,"div",31)(60,Be,9,4,"mat-card",32)(61,Oe,3,0,"div",33),i()()()()}if(n&2){let e=s();o(4),h(e.content.title),o(3),S(e.content.difficulty),o(2),h(e.getDifficultyIcon(e.content.difficulty)),o(),v(" ",F(11,25,e.content.difficulty)," "),o(3),h(e.content.description),o(7),m("innerHTML",e.sanitizedExplanation,w),o(),m("ngIf",e.content.interactiveExamples),o(),m("ngIf",e.content.keyPoints),o(17),m("matBadge",e.syntaxErrors.length)("matBadgeHidden",!e.syntaxErrors.length)("matTooltip",e.syntaxErrors.length?"Syntax errors found":"No syntax errors"),o(),m("color",e.syntaxErrors.length?"warn":"primary"),o(),v(" ",e.syntaxErrors.length?"error":"check_circle"," "),o(3),m("ngForOf",e.getLineNumbers()),o(),A("ngModel",e.currentCode),o(3),m("ngIf",e.syntaxErrors.length),o(5),m("matTooltip",e.previewMode),o(2),h(e.previewMode==="desktop"?"computer":"smartphone"),o(),S(e.previewMode),m("innerHTML",e.sanitizedPreview,w),o(3),m("ngIf",e.quizComplete),o(),m("ngForOf",e.content.quiz),o(),m("ngIf",!e.quizComplete&&e.allQuestionsAnswered)}}var be=class n{constructor(t,e,c,a){this.route=t;this.conceptService=e;this.sanitizer=c;this.snackBar=a}content=null;userAnswers=[];currentCode="";sanitizedPreview="";sanitizedExplanation="";previewMode="desktop";quizComplete=!1;quizScore=0;syntaxErrors=[];ngOnInit(){let t=this.route.snapshot.paramMap.get("conceptId");t&&this.conceptService.getConcept(t).subscribe(e=>{e&&(this.content=e,this.currentCode=e.example,this.sanitizedPreview=this.sanitizer.bypassSecurityTrustHtml(e.example),this.sanitizedExplanation=this.sanitizer.bypassSecurityTrustHtml(e.explanation.replace(/</g,"&lt;").replace(/>/g,"&gt;")),this.checkSyntax())})}getLineNumbers(){let t=this.currentCode.split(`
`).length;return Array.from({length:t},(e,c)=>c+1)}syncScroll(t){let e=t.target,c=e.previousElementSibling;c.scrollTop=e.scrollTop}onCodeChange(){this.updatePreview(),this.checkSyntax()}checkSyntax(){this.syntaxErrors=[];let t=this.currentCode.split(`
`),e=[],c=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]);t.forEach((a,d)=>{let y=0;for(;y<a.length;){let M=a.indexOf("<",y);if(M===-1)break;let z=a.indexOf(">",M);if(z===-1){this.syntaxErrors.push({line:d+1,message:"Unclosed tag bracket"});break}let b=a.substring(M+1,z);if(y=z+1,!b.startsWith("!"))if(b.startsWith("/")){let _=b.substring(1).trim().split(" ")[0].toLowerCase(),f=e.pop();f?f.tag!==_&&(this.syntaxErrors.push({line:d+1,message:`Mismatched closing tag: expected </${f.tag}>, found </${_}>`}),e.push(f)):this.syntaxErrors.push({line:d+1,message:`Unexpected closing tag </${_}>`})}else{let _=b.trim().split(" ")[0].toLowerCase();if(!_.match(/^[a-z][a-z0-9-]*$/)){this.syntaxErrors.push({line:d+1,message:`Invalid tag name: ${_}`});continue}let f=b.match(/\s\w+(?:=(?:"[^"]*"|'[^']*'|[^\s>]+))?/g);f&&f.forEach(Ce=>{let[ye,T]=Ce.trim().split("=");T&&!T.match(/^["'][^"']*["']$/)&&this.syntaxErrors.push({line:d+1,message:`Invalid attribute value for ${ye}: missing quotes`})}),!c.has(_)&&!b.endsWith("/")&&e.push({tag:_,line:d+1})}}}),e.forEach(({tag:a,line:d})=>{this.syntaxErrors.push({line:d,message:`Unclosed tag <${a}>`})})}highlightCode(t){return this.sanitizer.bypassSecurityTrustHtml(Prism.highlight(t,Prism.languages.markup,"markup"))}sanitizeHtml(t){return this.sanitizer.bypassSecurityTrustHtml(t)}tryExample(t){if(this.content?.interactiveExamples){let e=this.content.interactiveExamples[t];this.currentCode=e.code,this.updatePreview(),this.checkSyntax()}}getDifficultyIcon(t){switch(t){case"beginner":return"school";case"intermediate":return"trending_up";case"advanced":return"psychology";default:return"help"}}togglePreviewMode(){this.previewMode=this.previewMode==="desktop"?"mobile":"desktop"}copyCode(){navigator.clipboard.writeText(this.currentCode),this.snackBar.open("Code copied to clipboard!","Close",{duration:2e3})}resetCode(){this.content&&(this.currentCode=this.content.example,this.updatePreview())}updatePreview(){this.sanitizedPreview=this.sanitizer.bypassSecurityTrustHtml(this.currentCode)}checkAnswer(t,e){this.quizComplete||(this.userAnswers[t]=e)}isAnswerCorrect(t){return this.content?this.content.quiz[t].correctAnswer===this.userAnswers[t]:!1}get allQuestionsAnswered(){return this.content?this.userAnswers.length===this.content.quiz.length:!1}completeQuiz(){this.quizComplete=!0,this.calculateQuizScore()}resetQuiz(){this.userAnswers=[],this.quizComplete=!1,this.quizScore=0}calculateQuizScore(){if(!this.content)return;let t=this.userAnswers.reduce((e,c,a)=>e+(this.isAnswerCorrect(a)?1:0),0);this.quizScore=Math.round(t/this.content.quiz.length*100)}getAnswerColor(t,e){return this.userAnswers[t]===void 0||!this.content?null:this.content.quiz[t].correctAnswer===e?"primary":this.userAnswers[t]===e?"warn":null}static \u0275fac=function(e){return new(e||n)(k(N),k(re),k($),k(le))};static \u0275cmp=H({type:n,selectors:[["app-html-concept"]],decls:1,vars:1,consts:[["codeEditor",""],["class","concept-container",4,"ngIf"],[1,"concept-container"],[1,"concept-header"],[1,"header-content"],[1,"concept-meta"],["label","Explanation"],[1,"tab-content"],[1,"explanation-content"],[3,"innerHTML"],["class","interactive-examples",4,"ngIf"],["class","key-points",4,"ngIf"],["label","Example"],[1,"example-container"],[1,"code-section"],[1,"code-header"],[1,"code-actions"],["mat-icon-button","","matTooltip","Copy to clipboard",3,"click"],["mat-icon-button","","matTooltip","Reset code",3,"click"],["mat-icon-button","","matBadgeColor","warn",3,"matBadge","matBadgeHidden","matTooltip"],[3,"color"],[1,"code-editor"],[1,"line-numbers"],["class","line-number",4,"ngFor","ngForOf"],["rows","10","spellcheck","false",3,"ngModelChange","scroll","ngModel"],["class","syntax-errors",4,"ngIf"],[1,"preview-section"],[1,"preview-header"],["mat-icon-button","",3,"click","matTooltip"],[1,"preview-container",3,"innerHTML"],["label","Quiz"],["class","quiz-header",4,"ngIf"],["class","quiz-card",4,"ngFor","ngForOf"],["class","quiz-actions",4,"ngIf"],[1,"interactive-examples"],[4,"ngFor","ngForOf"],[1,"example-description"],[1,"mini-editor"],["mat-icon-button","","matTooltip","Try this example",3,"click"],[1,"code-block"],["class","example-result",4,"ngIf"],[1,"example-result"],[1,"key-points"],[1,"key-point-text"],[1,"line-number"],[1,"syntax-errors"],["class","error",4,"ngFor","ngForOf"],[1,"error"],["color","warn"],[1,"quiz-header"],["mat-button","","color","primary",3,"click"],[1,"quiz-card"],[1,"options"],["mat-button","",3,"disabled","color","click",4,"ngFor","ngForOf"],["class","answer-feedback",4,"ngIf"],["mat-button","",3,"click","disabled","color"],[1,"answer-feedback"],["class","explanation",4,"ngIf"],[1,"explanation"],[1,"quiz-actions"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,c){e&1&&p(0,Le,62,27,"div",1),e&2&&m("ngIf",c.content)},dependencies:[Q,B,O,L,W,j,D,R,K,U,G,Y,J,X,ee,Z,ce,oe,ae,ne,te,ie,se,de,me,_e,ve,pe,ue,ge,xe,fe,he],styles:[`.concept-container{padding:2rem;max-width:1200px;margin:0 auto;background-color:var(--theme-background-color);color:var(--theme-text-color)}.concept-header{margin-bottom:2rem}.header-content h1{font-size:2.5rem;margin-bottom:1rem;color:var(--theme-text-color)}.header-content p{font-size:1.1rem;line-height:1.6;color:var(--theme-secondary-text-color)}.concept-meta{margin:1rem 0}.concept-meta .beginner{background-color:var(--theme-beginner-color)!important;color:var(--theme-beginner-text-color)!important}.concept-meta .intermediate{background-color:var(--theme-intermediate-color)!important;color:var(--theme-intermediate-text-color)!important}.concept-meta .advanced{background-color:var(--theme-advanced-color)!important;color:var(--theme-advanced-text-color)!important}.tab-content{margin-top:1rem}.explanation-content{font-size:1.1rem;line-height:1.6}.interactive-examples{margin:2rem 0}.mini-editor{background:var(--theme-card-background);border-radius:4px;padding:1rem;margin:1rem 0}.code-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.code-block{background:var(--theme-code-background);border-radius:4px;padding:1rem;margin:0;overflow-x:auto}.example-result{margin-top:1rem;padding:1rem;background:var(--theme-card-background);border-radius:4px;border:1px solid var(--theme-border-color)}.key-points{margin-top:2rem;padding:1.5rem;background:var(--theme-card-background);border-radius:8px;border:1px solid var(--theme-border-color)}.key-points h3{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem;color:var(--theme-text-color)}.key-points ul{list-style:none;padding:0;margin:0}.key-points li{display:flex;align-items:flex-start;gap:.5rem;margin-bottom:.8rem}.key-points li mat-icon{color:var(--theme-success-color);font-size:20px}@media (max-width: 768px){.concept-container{padding:1rem}.header-content h1{font-size:2rem}}.example-container{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-top:1rem}@media (max-width: 768px){.example-container{grid-template-columns:1fr}}.example-container .code-section{background-color:var(--theme-card-background);border-radius:4px;overflow:hidden;border:1px solid var(--theme-border-color)}.example-container .code-section .code-header{display:flex;justify-content:space-between;align-items:center;padding:.5rem 1rem;background-color:var(--theme-card-header-background);border-bottom:1px solid var(--theme-border-color)}.example-container .code-section .code-header h3{margin:0;color:var(--theme-text-color)}.example-container .code-section .code-header .code-actions{display:flex;gap:.5rem}.example-container .code-section .editor{display:flex;background-color:var(--theme-code-background)}.example-container .code-section .editor .line-numbers{display:flex;flex-direction:column;min-width:40px;-webkit-user-select:none;user-select:none;text-align:right;color:var(--theme-code-comment-color);padding-right:.5rem;border-right:1px solid var(--theme-border-color)}.example-container .code-section .editor .line-numbers .line-number{font-family:Fira Code,monospace;font-size:.9rem;line-height:1.5}.example-container .code-section .editor textarea{flex:1;min-height:300px;background-color:var(--theme-code-background);color:var(--theme-code-text-color);border:none;font-family:Fira Code,monospace;font-size:.9rem;resize:vertical;padding:0 .5rem;outline:none;line-height:1.5}.example-container .code-section .editor textarea:focus{outline:1px solid var(--theme-border-color)}.example-container .code-section .syntax-errors{padding:1rem;background-color:var(--theme-code-background);border-top:1px solid var(--theme-border-color)}.example-container .code-section .syntax-errors .error{display:flex;align-items:center;gap:.5rem;color:var(--theme-error-color);font-size:.9rem;margin-bottom:.5rem}.example-container .code-section .syntax-errors .error:last-child{margin-bottom:0}.example-container .preview-section{border:1px solid var(--theme-border-color);border-radius:4px}.example-container .preview-section .preview-header{display:flex;justify-content:space-between;align-items:center;padding:.5rem 1rem;border-bottom:1px solid var(--theme-border-color);background-color:var(--theme-card-header-background)}.example-container .preview-section .preview-header h3{margin:0;color:var(--theme-text-color)}.example-container .preview-section .preview-container{min-height:300px;padding:1rem;background-color:var(--theme-card-background);overflow:auto}.example-container .preview-section .preview-container.mobile{max-width:375px;margin:0 auto;border:10px solid var(--theme-border-color);border-radius:20px;min-height:600px}.quiz-card{margin-bottom:1rem;background-color:var(--theme-card-background);border:1px solid var(--theme-border-color)}.quiz-card .options{display:flex;flex-direction:column;gap:.5rem;margin-top:1rem}.quiz-card .answer-feedback{margin-top:1rem;padding:1rem;border-radius:4px;background-color:var(--theme-card-background);border:1px solid var(--theme-border-color)}.quiz-actions{display:flex;justify-content:center;margin-top:2rem}.quiz-results{text-align:center;margin-bottom:2rem}
`],encapsulation:2})};export{be as HtmlConceptComponent};
