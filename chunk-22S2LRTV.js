import{a as oe}from"./chunk-AMS322FM.js";import"./chunk-KVVCMORN.js";import{a as be}from"./chunk-WW23XDZ5.js";import{a as le,b as me,c as pe,d as ue,e as xe,f as ge,g as he,h as ve,i as _e,j as fe}from"./chunk-LXJBDWFQ.js";import{a as se,b as de,c as Ee}from"./chunk-P32GDVSP.js";import{a as te,b as ne,c as ie}from"./chunk-RUGHS6W6.js";import{a as re,b as ae,c as ce}from"./chunk-XYOEQNEQ.js";import"./chunk-WL5TGL4W.js";import{b as j,e as D,h as R,k as W,m as Z,n as ee}from"./chunk-VEL47UNJ.js";import"./chunk-HU7WFQWJ.js";import{a as U,c as G,g as K}from"./chunk-FDQPCZWH.js";import{f as $,g as N,ma as J,na as X,oa as Y}from"./chunk-VSOBPEDQ.js";import{$b as h,Ab as S,Gb as o,Hb as n,Hc as B,Ib as E,Ic as L,Kb as C,Lc as O,Mc as Q,Nb as g,Pb as m,Zb as l,_a as y,_b as _,ab as r,ac as I,bc as A,cc as q,dc as V,e as ke,fb as k,ic as P,jc as F,ma as u,mb as H,na as x,qb as p,xb as s}from"./chunk-HK5TVXMR.js";var gt=ke(Ee());function Se(i,t){if(i&1&&(o(0,"div",42)(1,"strong"),l(2,"Result:"),n(),E(3,"div",40),n()),i&2){let e=m().$implicit,a=m(3);r(3),s("innerHTML",a.sanitizeHtml(e.result),y)}}function ze(i,t){if(i&1){let e=C();o(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),l(4,"code"),n(),l(5),n(),o(6,"mat-panel-description",36),l(7," Try it yourself! "),n()(),o(8,"div",37)(9,"div",15)(10,"span"),l(11,"Code:"),n(),o(12,"button",38),g("click",function(){let c=u(e).index,d=m(3);return x(d.tryExample(c))}),o(13,"mat-icon"),l(14,"play_arrow"),n()()(),o(15,"pre",39),E(16,"code",40),n(),p(17,Se,4,1,"div",41),n()()}if(i&2){let e=t.$implicit,a=t.index,c=m(3);r(5),h(" Interactive Example ",a+1," "),r(11),s("innerHTML",c.highlightCode(e.code),y),r(),s("ngIf",e.result)}}function Me(i,t){if(i&1&&(o(0,"mat-accordion",34),p(1,ze,18,3,"mat-expansion-panel",35),n()),i&2){let e=m(2);r(),s("ngForOf",e.content.interactiveExamples)}}function Te(i,t){if(i&1&&(o(0,"li")(1,"mat-icon"),l(2,"check_circle"),n(),o(3,"span",44),l(4),n()()),i&2){let e=t.$implicit;r(4),_(e)}}function He(i,t){if(i&1&&(o(0,"div",43)(1,"h3")(2,"mat-icon"),l(3,"lightbulb"),n(),l(4," Key Points "),n(),o(5,"ul"),p(6,Te,5,1,"li",35),n()()),i&2){let e=m(2);r(6),s("ngForOf",e.content.keyPoints)}}function Ie(i,t){if(i&1&&(o(0,"div",45),l(1),n()),i&2){let e=t.$implicit;r(),_(e)}}function Ae(i,t){if(i&1&&(o(0,"div",48)(1,"mat-icon",49),l(2,"error"),n(),o(3,"span"),l(4),n()()),i&2){let e=t.$implicit;r(4),I("Line ",e.line,": ",e.message,"")}}function qe(i,t){if(i&1&&(o(0,"div",46),p(1,Ae,5,2,"div",47),n()),i&2){let e=m(2);r(),s("ngForOf",e.syntaxErrors)}}function Ve(i,t){if(i&1){let e=C();o(0,"div",50)(1,"h3"),l(2,"Quiz Results"),n(),o(3,"p"),l(4),n(),o(5,"button",51),g("click",function(){u(e);let c=m(2);return x(c.resetQuiz())}),l(6,"Retake Quiz"),n()()}if(i&2){let e=m(2);r(4),h("Score: ",e.quizScore,"%")}}function Pe(i,t){if(i&1){let e=C();o(0,"button",56),g("click",function(){let c=u(e).index,d=m().index,w=m(2);return x(w.checkAnswer(d,c))}),l(1),n()}if(i&2){let e=t.$implicit,a=t.index,c=m().index,d=m(2);s("disabled",d.quizComplete)("color",d.getAnswerColor(c,a)),r(),h(" ",e," ")}}function Fe(i,t){if(i&1&&(o(0,"p",59),l(1),n()),i&2){let e=m(2).index,a=m(2);r(),h(" The correct answer is: ",a.content.quiz[e].options[a.content.quiz[e].correctAnswer]," ")}}function Be(i,t){if(i&1&&(o(0,"div",57)(1,"p"),l(2),n(),p(3,Fe,2,1,"p",58),n()),i&2){let e=m().index,a=m(2);r(),S(a.isAnswerCorrect(e)?"correct":"incorrect"),r(),h(" ",a.isAnswerCorrect(e)?"\u2713 Correct!":"\u2717 Incorrect"," "),r(),s("ngIf",!a.isAnswerCorrect(e))}}function Le(i,t){if(i&1&&(o(0,"mat-card",52)(1,"mat-card-content")(2,"h3"),l(3),n(),o(4,"p"),l(5),n(),o(6,"div",53),p(7,Pe,2,3,"button",54),n(),p(8,Be,4,4,"div",55),n()()),i&2){let e=t.$implicit,a=t.index,c=m(2);r(3),h("Question ",a+1,""),r(2),_(e.question),r(2),s("ngForOf",e.options),r(),s("ngIf",c.userAnswers[a]!==void 0)}}function Oe(i,t){if(i&1){let e=C();o(0,"div",60)(1,"button",61),g("click",function(){u(e);let c=m(2);return x(c.completeQuiz())}),l(2," Submit Quiz "),n()()}}function Qe(i,t){if(i&1){let e=C();o(0,"div",2)(1,"header",3)(2,"div",4)(3,"h1"),l(4),n(),o(5,"div",5)(6,"mat-chip-set")(7,"mat-chip")(8,"mat-icon"),l(9),n(),l(10),P(11,"titlecase"),n()()(),o(12,"p"),l(13),n()()(),o(14,"mat-tab-group")(15,"mat-tab",6)(16,"div",7)(17,"mat-card")(18,"mat-card-content")(19,"div",8),E(20,"div",9),p(21,Me,2,1,"mat-accordion",10)(22,He,7,1,"div",11),n()()()()(),o(23,"mat-tab",12)(24,"div",7)(25,"mat-card")(26,"mat-card-content")(27,"div",13)(28,"div",14)(29,"div",15)(30,"h3"),l(31,"HTML Code"),n(),o(32,"div",16)(33,"button",17),g("click",function(){u(e);let c=m();return x(c.copyCode())}),o(34,"mat-icon"),l(35,"content_copy"),n()(),o(36,"button",18),g("click",function(){u(e);let c=m();return x(c.resetCode())}),o(37,"mat-icon"),l(38,"restart_alt"),n()(),o(39,"button",19)(40,"mat-icon",20),l(41),n()()()(),o(42,"div",21)(43,"div",22),p(44,Ie,2,1,"div",23),n(),o(45,"textarea",24,0),V("ngModelChange",function(c){u(e);let d=m();return q(d.currentCode,c)||(d.currentCode=c),x(c)}),g("ngModelChange",function(){u(e);let c=m();return x(c.onCodeChange())})("scroll",function(c){u(e);let d=m();return x(d.syncScroll(c))}),l(47,"                      "),n()(),p(48,qe,2,1,"div",25),n(),o(49,"div",26)(50,"div",27)(51,"h3"),l(52,"Live Preview"),n(),o(53,"button",28),g("click",function(){u(e);let c=m();return x(c.togglePreviewMode())}),o(54,"mat-icon"),l(55),n()()(),E(56,"div",29),n()()()()()(),o(57,"mat-tab",30)(58,"div",7),p(59,Ve,7,1,"div",31)(60,Le,9,4,"mat-card",32)(61,Oe,3,0,"div",33),n()()()()}if(i&2){let e=m();r(4),_(e.content.title),r(3),S(e.content.difficulty),r(2),_(e.getDifficultyIcon(e.content.difficulty)),r(),h(" ",F(11,25,e.content.difficulty)," "),r(3),_(e.content.description),r(7),s("innerHTML",e.sanitizedExplanation,y),r(),s("ngIf",e.content.interactiveExamples),r(),s("ngIf",e.content.keyPoints),r(17),s("matBadge",e.syntaxErrors.length)("matBadgeHidden",!e.syntaxErrors.length)("matTooltip",e.syntaxErrors.length?"Syntax errors found":"No syntax errors"),r(),s("color",e.syntaxErrors.length?"warn":"primary"),r(),h(" ",e.syntaxErrors.length?"error":"check_circle"," "),r(3),s("ngForOf",e.getLineNumbers()),r(),A("ngModel",e.currentCode),r(3),s("ngIf",e.syntaxErrors.length),r(5),s("matTooltip",e.previewMode),r(2),_(e.previewMode==="desktop"?"computer":"smartphone"),r(),S(e.previewMode),s("innerHTML",e.sanitizedPreview,y),r(3),s("ngIf",e.quizComplete),r(),s("ngForOf",e.content.quiz),r(),s("ngIf",!e.quizComplete&&e.allQuestionsAnswered)}}var Ce=class i{constructor(t,e,a,c){this.route=t;this.conceptService=e;this.sanitizer=a;this.snackBar=c}content=null;userAnswers=[];currentCode="";sanitizedPreview="";sanitizedExplanation="";previewMode="desktop";quizComplete=!1;quizScore=0;syntaxErrors=[];ngOnInit(){let t=this.route.snapshot.paramMap.get("conceptId");t&&this.conceptService.getConcept(t).subscribe(e=>{if(e){if(this.content=e,this.currentCode=e.example,this.sanitizedPreview=this.sanitizer.bypassSecurityTrustHtml(e.example),e.explanation){let a=be.parse(e.explanation,{async:!1});this.sanitizedExplanation=this.sanitizer.bypassSecurityTrustHtml(a)}this.checkSyntax()}})}getLineNumbers(){let t=this.currentCode.split(`
`).length;return Array.from({length:t},(e,a)=>a+1)}syncScroll(t){let e=t.target,a=e.previousElementSibling;a.scrollTop=e.scrollTop}onCodeChange(){this.updatePreview(),this.checkSyntax()}checkSyntax(){this.syntaxErrors=[];let t=this.currentCode.split(`
`),e=[],a=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]);t.forEach((c,d)=>{let w=0;for(;w<c.length;){let z=c.indexOf("<",w);if(z===-1)break;let M=c.indexOf(">",z);if(M===-1){this.syntaxErrors.push({line:d+1,message:"Unclosed tag bracket"});break}let b=c.substring(z+1,M);if(w=M+1,!b.startsWith("!"))if(b.startsWith("/")){let v=b.substring(1).trim().split(" ")[0].toLowerCase(),f=e.pop();f?f.tag!==v&&(this.syntaxErrors.push({line:d+1,message:`Mismatched closing tag: expected </${f.tag}>, found </${v}>`}),e.push(f)):this.syntaxErrors.push({line:d+1,message:`Unexpected closing tag </${v}>`})}else{let v=b.trim().split(" ")[0].toLowerCase();if(!v.match(/^[a-z][a-z0-9-]*$/)){this.syntaxErrors.push({line:d+1,message:`Invalid tag name: ${v}`});continue}let f=b.match(/\s\w+(?:=(?:"[^"]*"|'[^']*'|[^\s>]+))?/g);f&&f.forEach(we=>{let[ye,T]=we.trim().split("=");T&&!T.match(/^["'][^"']*["']$/)&&this.syntaxErrors.push({line:d+1,message:`Invalid attribute value for ${ye}: missing quotes`})}),!a.has(v)&&!b.endsWith("/")&&e.push({tag:v,line:d+1})}}}),e.forEach(({tag:c,line:d})=>{this.syntaxErrors.push({line:d,message:`Unclosed tag <${c}>`})})}highlightCode(t){return t?this.sanitizer.bypassSecurityTrustHtml(Prism.highlight(t,Prism.languages.markup,"markup")):this.sanitizer.bypassSecurityTrustHtml("")}sanitizeHtml(t){return this.sanitizer.bypassSecurityTrustHtml(t)}tryExample(t){if(this.content?.interactiveExamples){let e=this.content.interactiveExamples[t];this.currentCode=e.code||"",this.updatePreview(),this.checkSyntax()}}getDifficultyIcon(t){switch(t){case"beginner":return"school";case"intermediate":return"trending_up";case"advanced":return"psychology";default:return"help"}}togglePreviewMode(){this.previewMode=this.previewMode==="desktop"?"mobile":"desktop"}copyCode(){navigator.clipboard.writeText(this.currentCode),this.snackBar.open("Code copied to clipboard!","Close",{duration:2e3})}resetCode(){this.content&&(this.currentCode=this.content.example,this.updatePreview())}updatePreview(){this.sanitizedPreview=this.sanitizer.bypassSecurityTrustHtml(this.currentCode)}checkAnswer(t,e){this.quizComplete||(this.userAnswers[t]=e)}isAnswerCorrect(t){return this.content?this.content.quiz[t].correctAnswer===this.userAnswers[t]:!1}get allQuestionsAnswered(){return this.content?this.userAnswers.length===this.content.quiz.length:!1}completeQuiz(){this.quizComplete=!0,this.calculateQuizScore()}resetQuiz(){this.userAnswers=[],this.quizComplete=!1,this.quizScore=0}calculateQuizScore(){if(!this.content)return;let t=this.userAnswers.reduce((e,a,c)=>e+(this.isAnswerCorrect(c)?1:0),0);this.quizScore=Math.round(t/this.content.quiz.length*100)}getAnswerColor(t,e){return this.userAnswers[t]===void 0||!this.content?null:this.content.quiz[t].correctAnswer===e?"primary":this.userAnswers[t]===e?"warn":null}static \u0275fac=function(e){return new(e||i)(k(N),k(oe),k($),k(le))};static \u0275cmp=H({type:i,selectors:[["app-html-concept"]],decls:1,vars:1,consts:[["codeEditor",""],["class","concept-container",4,"ngIf"],[1,"concept-container"],[1,"concept-header"],[1,"header-content"],[1,"concept-meta"],["label","Explanation"],[1,"tab-content"],[1,"explanation-content"],[1,"markdown-content",3,"innerHTML"],["class","interactive-examples",4,"ngIf"],["class","key-points",4,"ngIf"],["label","Example"],[1,"example-container"],[1,"code-section"],[1,"code-header"],[1,"code-actions"],["mat-icon-button","","matTooltip","Copy to clipboard",3,"click"],["mat-icon-button","","matTooltip","Reset code",3,"click"],["mat-icon-button","","matBadgeColor","warn",3,"matBadge","matBadgeHidden","matTooltip"],[3,"color"],[1,"code-editor"],[1,"line-numbers"],["class","line-number",4,"ngFor","ngForOf"],["rows","10","spellcheck","false",1,"code-textarea",3,"ngModelChange","scroll","ngModel"],["class","syntax-errors",4,"ngIf"],[1,"preview-section"],[1,"preview-header"],["mat-icon-button","",3,"click","matTooltip"],[1,"preview-container",3,"innerHTML"],["label","Quiz"],["class","quiz-header",4,"ngIf"],["class","quiz-card",4,"ngFor","ngForOf"],["class","quiz-actions",4,"ngIf"],[1,"interactive-examples"],[4,"ngFor","ngForOf"],[1,"example-description"],[1,"mini-editor"],["mat-icon-button","","matTooltip","Try this example",3,"click"],[1,"code-block"],[3,"innerHTML"],["class","example-result",4,"ngIf"],[1,"example-result"],[1,"key-points"],[1,"key-point-text"],[1,"line-number"],[1,"syntax-errors"],["class","error",4,"ngFor","ngForOf"],[1,"error"],["color","warn"],[1,"quiz-header"],["mat-button","","color","primary",3,"click"],[1,"quiz-card"],[1,"options"],["mat-button","",3,"disabled","color","click",4,"ngFor","ngForOf"],["class","answer-feedback",4,"ngIf"],["mat-button","",3,"click","disabled","color"],[1,"answer-feedback"],["class","explanation",4,"ngIf"],[1,"explanation"],[1,"quiz-actions"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,a){e&1&&p(0,Qe,62,27,"div",1),e&2&&s("ngIf",a.content)},dependencies:[Q,B,L,O,W,j,D,R,K,U,G,Y,J,X,ee,Z,ce,re,ae,ie,te,ne,me,de,se,ve,he,pe,ue,ge,xe,fe,_e],styles:[`.concept-container{padding:2rem;max-width:1200px;margin:0 auto;background-color:var(--theme-background-color);color:var(--theme-text-color)}.concept-header{margin-bottom:2rem}.header-content h1{font-size:2.5rem;margin-bottom:1rem;color:var(--theme-text-color)}.header-content p{font-size:1.1rem;line-height:1.6;color:var(--theme-secondary-text-color)}.concept-meta{margin:1rem 0}.concept-meta .beginner{background-color:var(--theme-beginner-color)!important;color:var(--theme-beginner-text-color)!important}.concept-meta .intermediate{background-color:var(--theme-intermediate-color)!important;color:var(--theme-intermediate-text-color)!important}.concept-meta .advanced{background-color:var(--theme-advanced-color)!important;color:var(--theme-advanced-text-color)!important}.tab-content{margin-top:1rem}.explanation-content{font-size:1.1rem;line-height:1.6}.interactive-examples{margin:2rem 0}.mini-editor{background:var(--theme-card-background);border-radius:4px;padding:1rem;margin:1rem 0}.code-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.code-block{background:var(--theme-code-background);border-radius:4px;padding:1rem;margin:0;overflow-x:auto}.example-result{margin-top:1rem;padding:1rem;background:var(--theme-card-background);border-radius:4px;border:1px solid var(--theme-border-color)}.key-points{margin-top:2rem;padding:1.5rem;background:var(--theme-card-background);border-radius:8px;border:1px solid var(--theme-border-color)}.key-points h3{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem;color:var(--theme-text-color)}.key-points ul{list-style:none;padding:0;margin:0}.key-points li{display:flex;align-items:flex-start;gap:.5rem;margin-bottom:.8rem}.key-points li mat-icon{color:var(--theme-success-color);font-size:20px}@media (max-width: 768px){.concept-container{padding:1rem}.header-content h1{font-size:2rem}}.example-container{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-top:1rem}@media (max-width: 768px){.example-container{grid-template-columns:1fr}}.example-container .code-section{background-color:var(--theme-card-background);border-radius:4px;overflow:hidden;border:1px solid var(--theme-border-color)}.example-container .code-section .code-header{display:flex;justify-content:space-between;align-items:center;padding:.5rem 1rem;background-color:var(--theme-card-header-background);border-bottom:1px solid var(--theme-border-color)}.example-container .code-section .code-header h3{margin:0;color:var(--theme-text-color)}.example-container .code-section .code-header .code-actions{display:flex;gap:.5rem}.example-container .code-section .code-editor{display:flex;background-color:var(--theme-code-background);position:relative;min-height:300px;border:1px solid var(--theme-border-color);overflow:hidden}.example-container .code-section .code-editor .line-numbers{display:flex;flex-direction:column;min-width:40px;-webkit-user-select:none;user-select:none;text-align:right;color:var(--theme-code-comment-color);padding-right:.5rem;border-right:1px solid var(--theme-border-color)}.example-container .code-section .code-editor .line-numbers .line-number{font-family:Fira Code,monospace;font-size:.9rem;line-height:1.5}.example-container .code-section .code-editor .code-textarea{flex:1;min-height:300px;background-color:var(--theme-code-background);color:var(--theme-code-text-color);border:none;font-family:Fira Code,monospace;font-size:.9rem;resize:none;padding:.5rem;outline:none;line-height:1.5;white-space:pre;overflow-wrap:normal;overflow-x:auto;tab-size:2}.example-container .code-section .code-editor .code-textarea:focus{outline:1px solid var(--theme-primary-color)}.example-container .code-section .syntax-errors{padding:1rem;background-color:var(--theme-code-background);border-top:1px solid var(--theme-border-color)}.example-container .code-section .syntax-errors .error{display:flex;align-items:center;gap:.5rem;color:var(--theme-error-color);font-size:.9rem;margin-bottom:.5rem}.example-container .code-section .syntax-errors .error:last-child{margin-bottom:0}.example-container .preview-section{border:1px solid var(--theme-border-color);border-radius:4px}.example-container .preview-section .preview-header{display:flex;justify-content:space-between;align-items:center;padding:.5rem 1rem;border-bottom:1px solid var(--theme-border-color);background-color:var(--theme-card-header-background)}.example-container .preview-section .preview-header h3{margin:0;color:var(--theme-text-color)}.example-container .preview-section .preview-container{min-height:300px;padding:1rem;background-color:var(--theme-card-background);overflow:auto}.example-container .preview-section .preview-container.mobile{max-width:375px;margin:0 auto;border:10px solid var(--theme-border-color);border-radius:20px;min-height:600px}.explanation-content .markdown-content{line-height:1.6;margin-bottom:2rem}.explanation-content .markdown-content h1,.explanation-content .markdown-content h2,.explanation-content .markdown-content h3,.explanation-content .markdown-content h4,.explanation-content .markdown-content h5,.explanation-content .markdown-content h6{margin-top:1.5em;margin-bottom:.5em;font-weight:500}.explanation-content .markdown-content p{margin-bottom:1em}.explanation-content .markdown-content ul,.explanation-content .markdown-content ol{margin-left:1.5em;margin-bottom:1em}.explanation-content .markdown-content li{margin-bottom:.5em}.explanation-content .markdown-content code{background-color:#0000000d;padding:.2em .4em;border-radius:3px;font-family:monospace}.explanation-content .markdown-content pre{background-color:#0000000d;padding:1em;border-radius:5px;overflow-x:auto;margin-bottom:1em}.explanation-content .markdown-content strong{font-weight:600}.explanation-content .markdown-content blockquote{border-left:4px solid #ccc;padding-left:1em;margin-left:0;margin-right:0;font-style:italic}.explanation-content .markdown-content table{border-collapse:collapse;width:100%;margin-bottom:1em}.explanation-content .markdown-content table th,.explanation-content .markdown-content table td{border:1px solid #ddd;padding:8px}.explanation-content .markdown-content table th{background-color:#0000000d;text-align:left}.explanation-content .markdown-content table tr:nth-child(2n){background-color:#00000006}.quiz-card{margin-bottom:1rem;background-color:var(--theme-card-background);border:1px solid var(--theme-border-color)}.quiz-card .options{display:flex;flex-direction:column;gap:.5rem;margin-top:1rem}.quiz-card .answer-feedback{margin-top:1rem;padding:1rem;border-radius:4px;background-color:var(--theme-card-background);border:1px solid var(--theme-border-color)}.quiz-actions{display:flex;justify-content:center;margin-top:2rem}.quiz-results{text-align:center;margin-bottom:2rem}
`],encapsulation:2})};export{Ce as HtmlConceptComponent};
